# cYSP
YSP播放器C++版本。GCP前期开发工作也在此进行。本项目只包括开源部分的源码，非开源部分会上传对应的dll（如果必要的话）

# Ver0.8.2_Pub(Build120.10020)_SPOL0.6.5\Ver0.8.1_Pub(Build120.10010)_SPOL0.6.5

修复了抖动特效无法正常播放的问题

修复了标题消失时帧数低于预期帧数的问题

修复了切换语言时，选择语言对话框的标题无法正常显示的问题

修复了跳转页面的回溯算法会错误留存其他文档的回溯信息的问题，该问题导致连续播放剧情时会使后续剧情在跳转时错误显示之前剧情的素材

修复了在某些情况下，回溯算法不能回溯音乐控制器的问题

修复了解释器会错误的把第一个讲述人立绘的滤镜加到第二个讲述人立绘之上的问题

修正了附带的指导文档中的部分错误

# Ver0.8.0_Pub(Build120.1000)_SPOL0.6.5

修复了未订正的翻译系统内部文本

完成了余下的翻译工作

## Ver0.8.0_Pre4(Build120.0)_SPOL0.6.5

修复了文档内只有版本声明行与标题控制器，没有其他与剧情内容实际相关的控制器时程序会崩溃的问题

修复了两人对话时立绘交替变暗功能未生效的问题

修复了一个滤镜运算时的精度错误，它导致褪色滤镜效果与原Python版褪色滤镜效果不一致

修复了一个防闪烁模块的问题，它导致Qt频繁报错“无效图像”（不影响运行）

修复了一个图像翻转的问题，它导致找不到立绘的讲述控制器会引起Qt报错“无效图像”（不影响运行）

屏蔽了一部分本版中不再计划启用的功能

## Ver0.8.0_Pre3(Build118.0)_SPOL0.6.5

完善了UI功能，但屏蔽了部分不会在本版中启用的UI

恢复了快捷键功能

对程序内存占用情况做出了优化

对程序主页的性能做出了优化

对内核引入了IFL规定，以及根据IFL重新确定了九个标准解释器异常（EIFL）

重新规定了翻译系统的文本内部名称

清理了部分不使用的翻译文本

清理了部分不使用的内核信息

清理了部分内核冗余

## Ver0.8.0_Pre2(Build115.0)_SPOL0.6.5

增加了部分UI

新增了SPOLDev的半可视化编辑（已有源码，但被注释屏蔽）

## Ver0.8.0_Pre1.1(Build111.0)_SPOL0.6.5

修复了更换语言时产生的闪退问题

移除了相当一部分解释器运行时对控制台输出的debug文本

移除了部分未使用的头文件和重复的include文件

更改了解释器在从标题进入播放状态时生成跳转列表的执行顺序

增强了代码的可读性

## Ver0.8.0_Pre1(Build110.514)_SPOL0.6.5

完成了音乐控制器、音效控制器

完成了大分支控制器的识别

修复了未生效的大分支后处理算法

修复了QtWordgame中存在的若干错误的内存管理算法

增强了代码的可读性

## Ver0.8.0_Pre1_PT4(Build110.4080)_SPOL0.6.5

调整了背景控制器的第一阶段留存时间

给图像处理线程等待时间给予5秒的等待上限，避免因为线程冲突导致计数不归零、进而引发程序假死的问题。

修复了程序在非1080高度的分辨率下（尤其是低于1080高度的分辨率时），跳转行文本的显示缺失、左右错位等问题。

修复了回溯长时性控制器算法未生效的问题。

修复了跳转行页面可能会显示一个离谱的大数值的问题。

修复了跳转行页面可能会错误显示其他行数值的问题。

修复了讲述控制器的自动换行无法识别东亚方块字（中文、韩文、日文），进而导致文本超界的问题。

修复了在用户违反SPOL语法，错误的使用两个有讲述文本的讲述控制器时，程序会崩溃的问题。

修复了小分支控制器未能正确定位分支区域的问题。

## Ver0.8.0_Pre1_PT3(Build110.3000)_SPOL0.6.5

完成了讲述控制器的初步识别

修复了解释器和UI通信过程中所出现的Bug

更改QtWordGame下讲述控制器的图像名称机制为新版机制

## Ver0.8.0_Pre1_PT2(Build110.0010)_SPOL0.6.5

完成了小分支控制器的解释与UI正常显示

完成了跳转功能

在测试新版本播放页面期间，进入程序后优先进入播放页面而不是程序主页

为一些代码新增了注释，增强可读性

修复了QtWordGame中的一些代码错误

更改了writesettings函数，从int类型变成了void类型

修正了不正确的版本号，现在明确SPOL版本为0.6.5，仅用来标示是新版本解释器，其功能与Python的最后一版0.6.0版本基本一致。0.6.0可以直接使用FollowNew与新版兼容

## Ver0.8.0_Pre1_PT1(Build110.0)_SPOL0.6.5

* 这是第一个C++版本的YSP的第一个测试版本的第一个预测版本，您将体验到数倍于Python版本YSP的运算性能与图形性能提升。具体提升幅度取决于您的CPU核心数量。
* 需要说明的是，本预测版本并不能正常使用——解释器只完成了背景控制器的识别。

新增了SPOL编辑器（SPOLDev）页面，取代第三方的SPOL编辑器。

增强了更新推送系统，程序现在会在告知可以更新时同时列出更新日志的链接（若未提供更新日志则也会标明无日志）。新的更新推送系统与老版本YSP兼容，您不必担心保留在您计算机上的老版本YSP因为升级更新推送机制而无法正常接受更新，或是在运行时崩溃。

更改了交互页面（今后称作程序主页）的外观设计。该设计是一个缓冲方案，日后会继续更改。

取消了程序执行时的SPOL语法报错，更改为在SPOLDev下启动播放前的集中报错。（暂未实装）

重新决定了在播放剧情时有哪些信息需要被推到控制台上显示。

新增了GCP模式。该模式目前只是个空壳子，后期会继续完善。

取消了YSP程序从双击SPOL文件打开时，直接进入播放页面并播放的功能。该功能将会在SPOLDev进一步开发之后于SPOLDev页面间接恢复。

经过长期观察，我们发现CrashReport内容大部分都是程序逻辑错误与SPOL引起的错误，没有其他意外错误，故取消了CrashReport报错系统。

改变了滤镜系统的算法，现在不会产生“缓存的缓存”，并且缓存文件命名与之前有差别，不能使用之前的缓存文件。上述改变均在为下一版SPOL做准备。

由于新版滤镜系统效率过高，因此现在在每次播放剧情之前都会对所有图像进行滤镜运算，并不像老版本的滤镜系统那样会跳过已经被运算过且已经缓存图像。这项更改可以杜绝老版本中更改原图后缓存图像无法自动更新的问题。

不再使用语言文件夹下的base.ini作为记录语言设置的文件。

新增记录程序统一设置的文件options.txt，部分敏感设置存储在注册表而非此文件之内。这意味着您的多个YSP程序将会共享相同的敏感设置。

新增程序设置：播放分辨率、播放窗口化、GCP模式切换（前两项现在只能通过改options实现））

允许在options.txt内通过调整Update_Channel更改更新接受通道，Auto为沿用当前通道，Pre为预览通道（内部渠道），Pub为公开通道（正式渠道）

允许在options.txt内通过调整Forced_Debugging_Info值为True在公开版本中启用内测版本的部分调试信息，这些调试信息大多为程序运行信息，于用户正常使用无益。

增强了按行跳转算法，现在会自动追加解释目标行之前的最后一个背景控制器和音乐控制器，以达到正常显示与扬声效果。

新增健康游戏忠告（仅在简体中文时显示）
